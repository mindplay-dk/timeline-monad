<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.7.1">
<meta name="description" content="timeline FRP Monad">
<meta name="keywords" content="JavaScript, ECMAScript, Promise, FRP, timeline, monad">
<meta name="author" content="Ken Okabe">
<title>timeline-monad is Timeline Monad</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Uncomment @import statement below to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
*:not(pre)>code.nobreak{word-wrap:normal}
*:not(pre)>code.nowrap{white-space:nowrap}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote::before{display:none}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{word-spacing:0;line-height:1.6}
.quoteblock.abstract blockquote::before,.quoteblock.abstract p::before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd){background:#f8f8f7}
table.stripes-none tr,table.stripes-odd tr:nth-of-type(even){background:none}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>timeline-monad is Timeline Monad</h1>
<div class="details">
<span id="author" class="author">Ken Okabe</span><br>
<span id="email" class="email"><a href="mailto:stken2050@gmail.com">stken2050@gmail.com</a></span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_what_is_timeline_monad">1. What is timeline-monad?</a></li>
<li><a href="#_install">2. Install</a></li>
<li><a href="#_frp_background_and_rationale">3. FRP Background and Rationale</a></li>
<li><a href="#_timeline_is_similar_to_promise_instance">4. <em>timeline</em> is similar to Promise instance</a></li>
<li><a href="#_api">5. API</a></li>
<li><a href="#_simple_usage">6. Simple usage</a></li>
<li><a href="#_mit_license">7. MIT License</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<style type="text/css">
p >code {background-color: #aaaaaa};
td >code {background-color: #aaaaaa};
</style>
<div class="paragraph">
<p>Micro Functional Reactive Programming (FRP) Framework with Monad structure</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="https://travis-ci.org/stken2050/timeline-monad"><img src="https://travis-ci.org/stken2050/timeline-monad.svg?branch=master" alt="timeline monad"></a>
</div>
</div>
<iframe src="https://ghbtns.com/github-btn.html?user=stken2050&repo=timeline-monad&type=star&count=true&size=large" frameborder="0" scrolling="0" width="160px" height="30px"></iframe>
</div>
</div>
<div class="sect1">
<h2 id="_what_is_timeline_monad">1. What is timeline-monad?</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>timeline-monad</strong> is a JavaScript(ES6+) module of a minimal (super simple) implementation for <em>Functional Reactive Programming(FPP)</em>. The module provides <strong>first class reactive values <em>'over time'</em></strong> .</p>
</li>
<li>
<p><strong>timeline-monad</strong> is robust for <em>function composition</em>
because it has a <a href="https://ncatlab.org/nlab/show/monad"><em>monad</em></a> structure.</p>
</li>
<li>
<p><strong>timeline-monad</strong>'s <a href="https://github.com/stken2050/timeline-monad/blob/master/dist/esm/timeline-monad.js">source code</a> is <strong>less than 40 lines</strong>(ESModule version, the comment lines excluded).</p>
</li>
<li>
<p>The code is <a href="https://github.com/stken2050/timeline-monad/tree/master/test-jest">heavily tested</a> including to <a href="https://github.com/stken2050/timeline-monad/blob/master/test-jest/monad.test.js">satisfy monad laws</a>.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_install">2. Install</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://www.npmjs.com/package/timeline-monad" class="bare">https://www.npmjs.com/package/timeline-monad</a></p>
</div>
<div class="literalblock">
<div class="content">
<pre>npm i timeline-monad</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Quick Starter project available</div>
<div class="paragraph">
<p><a href="https://github.com/stken2050/unlimitedjs">unlimitedjs (timeline-monad + superfine) Quick Start template project</a></p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_timeline_monad">2.1. timeline-monad</h3>
<div class="sect3">
<h4 id="_es_module_esm_from_node">2.1.1. ES Module (ESM) from Node</h4>
<div class="paragraph">
<p>Just use:</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/stken2050/timeline-monad/blob/master/dist/esm/timeline-monad.js" class="bare">https://github.com/stken2050/timeline-monad/blob/master/dist/esm/timeline-monad.js</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">import { T } from "timeline-monad";</code></pre>
</div>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">import { T } from "timeline-monad/dist/esm/timeline-monad.js";</code></pre>
</div>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">import { T } from "../node_modules/timeline-monad/dist/esm/timeline-monad.js";</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_es_module_esm_from_browser">2.1.2. ES Module (ESM) from Browser</h4>
<div class="paragraph">
<p><a href="https://caniuse.com/#feat=es6-module">Browser support for ES modules via script tag</a></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./img/02/scriptmodule.png" alt="scriptmodule">
</div>
</div>
<div class="paragraph">
<p>local ESM in any location</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">    &lt;script type="module"&gt;
        import { T } from "./dist/esm/timeline-monad.js";
    &lt;/script&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>locally installed node module</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">    &lt;script type="module"&gt;
        import { T } from "../node_modules/timeline-monad/dist/esm/timeline-monad.js";
    &lt;/script&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>remote CDN</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">    &lt;script type="module"&gt;
        import { T } from "https://unpkg.com/timeline-monad/dist/esm/timeline-monad.js";
    &lt;/script&gt;</code></pre>
</div>
</div>
<iframe height="265" style="width: 100%;" scrolling="no" title="Hello Timeline" src="//codepen.io/stken2050/embed/ZwOaEr/?height=265&theme-id=36003&default-tab=js,result" frameborder="no" allowtransparency="true" allowfullscreen="true">
  See the Pen <a href='https://codepen.io/stken2050/pen/ZwOaEr/'>Hello Timeline</a> by Ken OKABE
  (<a href='https://codepen.io/stken2050'>@stken2050</a>) on <a href='https://codepen.io'>CodePen</a>.
</iframe>
</div>
</div>
<div class="sect2">
<h3 id="_timeline_monad_extension">2.2. timeline-monad Extension</h3>
<div class="paragraph">
<p><strong>allThenResetTL()</strong>
corresponds to <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/all">Promise.all()</a></p>
</div>
<div class="sect3">
<h4 id="_es_module_esm_from_node_2">2.2.1. ES Module (ESM) from Node</h4>
<div class="paragraph">
<p>Just use:</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/stken2050/timeline-monad/blob/master/dist/esm/allThenResetTL.js" class="bare">https://github.com/stken2050/timeline-monad/blob/master/dist/esm/allThenResetTL.js</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">import { allThenResetTL.js } from "timeline-monad/dist/esm/allThenResetTL.js";</code></pre>
</div>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">import { allThenResetTL.js } from "../node_modules/timeline-monad/dist/esm/allThenResetTL.js";</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_es_module_esm_from_browser_2">2.2.2. ES Module (ESM) from Browser</h4>
<div class="paragraph">
<p>local ESM in any location</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">    &lt;script type="module"&gt;
    import { T } from "./dist/esm/timeline-monad.js";
    import { allThenResetTL } from "./dist/esm/allThenResetTL.js";
    &lt;/script&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>locally installed node module</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">    &lt;script type="module"&gt;
    import { T } from "../node_modules/timeline-monad/dis/esm/timeline-monad.js";
    import { allThenResetTL } from "../node_modules/timeline-monad/dis/esm/allThenResetTL.js";
    &lt;/script&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>remote CDN</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">    &lt;script type="module"&gt;
        import { T } from "https://unpkg.com/timeline-monad/dist/esm/timeline-monad.js";
        import { allThenResetTL } from "https://unpkg.com/timeline-monad/dist/esm/allThenResetTL.js";
    &lt;/script&gt;</code></pre>
</div>
</div>
<iframe height="497" style="width: 100%;" scrolling="no" title="Hello All Timeline" src="//codepen.io/stken2050/embed/KJMZWE/?height=497&theme-id=36003&default-tab=js,result" frameborder="no" allowtransparency="true" allowfullscreen="true">
  See the Pen <a href='https://codepen.io/stken2050/pen/KJMZWE/'>Hello All Timeline</a> by Ken OKABE
  (<a href='https://codepen.io/stken2050'>@stken2050</a>) on <a href='https://codepen.io'>CodePen</a>.
</iframe>
</div>
</div>
<div class="sect2">
<h3 id="_typescript_type_definition_files">2.3. TypeScript Type definition files</h3>
<div class="paragraph">
<p><a href="https://github.com/stken2050/timeline-monad/blob/master/dist/esm/timeline-monad.d.ts" class="bare">https://github.com/stken2050/timeline-monad/blob/master/dist/esm/timeline-monad.d.ts</a></p>
</div>
<div class="paragraph">
<p><a href="https://github.com/stken2050/timeline-monad/blob/master/dist/esm/allThenResetTL.d.ts" class="bare">https://github.com/stken2050/timeline-monad/blob/master/dist/esm/allThenResetTL.d.ts</a></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_frp_background_and_rationale">3. FRP Background and Rationale</h2>
<div class="sectionbody">
<div class="quoteblock">
<blockquote>
The distinction between the past, present and future is only a stubbornly persistent illusion.
</blockquote>
<div class="attribution">
&#8212; Albert Einstein
</div>
</div>
<hr>
<div class="sect2">
<h3 id="_the_illusion_of_time_past_present_and_future_all_exist_together">3.1. The illusion of time : past, present and future all exist together</h3>
<div class="paragraph">
<p>Frozen Block Universe and Human Consciousness</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://github.com/kenokabe/00img/wiki/block-universe.jpg" alt="block universe">
</div>
</div>
<div class="paragraph">
<p><a href="https://stackoverflow.com/questions/1028250/what-is-functional-reactive-programming">Conal Elliott(a developer who has contributed to early FRP) explaines</a></p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>FRP is about "datatypes that represent a value <strong>over time</strong>".
Conventional imperative programming captures these dynamic values only indirectly, through state and mutations. The complete history (past, present, future) has no first class representation. Moreover, only <em>discretely evolving</em> values can be (indirectly) captured, since the imperative paradigm is temporally discrete.
In contrast, FRP captures these evolving values <em>directly</em> and has no difficulty with <em>continuously</em> evolving values.
Dynamic/evolving values (i.e., values "over time") are first class values in themselves. You can define them and combine them, pass them into &amp; out of functions.</p>
</div>
</blockquote>
</div>
</div>
<div class="sect2">
<h3 id="_immutable_world_perspective_fits_immutability_in_functional_programming">3.2. Immutable world perspective fits immutability in functional programming</h3>
<div class="paragraph">
<p>As long as we are entrapped in perspective of mutable world model, functional programming remains very problematic since the concept of immutability is critical.</p>
</div>
<div class="paragraph">
<p><a href="https://wiki.haskell.org/FRP">Functional Reactive Programming (FRP)</a> integrates <strong>time flow</strong> and compositional events into functional programming.</p>
</div>
<div class="paragraph">
<p>The basic idea is that <strong>a time-varying value can be represented as a function of time</strong>.</p>
</div>
<div class="paragraph">
<p><a href="https://en.wikipedia.org/wiki/Structure_and_Interpretation_of_Computer_Programs">Structure and Interpretation of Computer Programs(SICP)</a>
(<a href="https://mitpress.mit.edu/sites/default/files/sicp/full-text/book/book-Z-H-24.html#%_sec_3.5">Chapter 3.5 : Streams</a>)</p>
</div>
<hr>
<div class="paragraph">
<p>Let&#8217;s step back and review where this complexity comes from. In an attempt to model real-world phenomena, we made some apparently reasonable decisions: We modeled real-world objects with local state by computational objects with local variables. We identified time variation in the real world with time variation in the computer. We implemented the time variation of the states of the model objects in the computer with assignments to the local variables of the model objects.</p>
</div>
<div class="paragraph">
<p>Is there another approach? Can we avoid identifying time in the computer with time in the modeled world? Must we make the model change with time in order to model phenomena in a changing world? <strong>Think about the issue in terms of mathematical functions. We can describe the time-varying behavior of a quantity  <code>x</code>  as a function of time <code>x(t)</code>. If we concentrate on  <code>x</code> instant by instant, we think of it as a changing quantity. Yet if we concentrate on the entire time history of values, we do not emphasize change&#8201;&#8212;&#8201;the function itself does not change.</strong>
(Physicists sometimes adopt this view by introducing the <em>world lines</em> of particles as a device for reasoning about motion.)</p>
</div>
<div class="paragraph">
<p>If time is measured in discrete steps, then <strong>we can model a time function as a (possibly infinite) sequence</strong>. In this section, we will see <strong>how to model change in terms of sequences that represent the time histories of the systems being modeled</strong>. To accomplish this, we introduce new data structures called  <strong><em>streams</em></strong>. From an abstract point of view, a stream is simply a sequence. However, we will find that the straightforward implementation of streams as lists (as in section 2.2.1) doesn&#8217;t fully reveal the power of stream processing. As an alternative, we introduce the technique of <strong><em>delayed evaluation</em>, which enables us to represent very large (even infinite) sequences as streams</strong>.</p>
</div>
<div class="paragraph">
<p>This is really remarkable. Even though stream-withdraw implements a well-defined mathematical function whose behavior does not change, the user&#8217;s perception here is one of interacting with a system that has a changing state. <strong>One way to resolve this paradox is to realize that it is the user&#8217;s temporal existence that imposes state on the system.</strong> If the user could step back from the interaction and think in terms of streams of balances rather than individual transactions, the system would appear stateless.
(<strong>Similarly in physics, when we observe a moving particle, we say that the position (state) of the particle is changing. However, from the perspective of the particle&#8217;s <em>world line in space-time</em> there is no change involved.</strong>)</p>
</div>
<div class="paragraph">
<p><strong>we can model the world as a single, timeless, stateless unity</strong>.</p>
</div>
<hr>
<div class="paragraph">
<p>Our world is modeled as an immutable, timeless, stateless unity from the perspective of physics</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://upload.wikimedia.org/wikipedia/commons/6/6f/CMB_Timeline300_no_WMAP.jpg" alt="CMB Timeline300 no WMAP">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_frp_is_about_immutability_declarative_and_event_driven_programming">3.3. FRP is about immutability, declarative and event-driven programming</h3>

</div>
</div>
</div>
<div class="sect1">
<h2 id="_timeline_is_similar_to_promise_instance">4. <em>timeline</em> is similar to Promise instance</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">ES6+ Promise</a> is widely used in JavaScript.</p>
</div>
<div class="paragraph">
<p>Promise and timeline-monad(FRP) has a common nature to handle asynchronous behaviors in functional programming, and both has similar syntax.</p>
</div>
<div class="paragraph">
<p>In fact, <strong>Promise is <em>functional</em> and <em>reactive</em>. A Promise instance is a first class reactive value 'over time', so it&#8217;s kind of Functional Reactive Programming(FRP)</strong>, and the difference is in general, <strong>FRP value reacts on repeating process, on the other hand, Promise reacts only one time</strong>.</p>
</div>
<div class="paragraph">
<p>Hence, although FRP or <em>timeline</em> might be a new idea to a leaner, if one already know what the Promise is, it should be straight forward to understand what the <em>timeline</em> is.</p>
</div>
<div class="listingblock">
<div class="title">Promise and timeline-monad</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">import { T } from "timeline-monad";

let promise1resolve;
const promise1 = new Promise(resolve =&gt; { <i class="conum" data-value="1"></i><b>(1)</b>
  promise1resolve = resolve;
});
const timeline1 = T(); <i class="conum" data-value="2"></i><b>(2)</b>

const promise2 = promise1.then(a =&gt; a + " promise"); <i class="conum" data-value="3"></i><b>(3)</b>
const timeline2 = timeline1.sync(a =&gt; a + " timeline"); <i class="conum" data-value="4"></i><b>(4)</b>

const promise3 = promise2.then(a =&gt; console.log(a)); <i class="conum" data-value="5"></i><b>(5)</b>
const timeline3 = timeline2.sync(a =&gt; console.log(a)); <i class="conum" data-value="6"></i><b>(6)</b>

promise1resolve("hello"); <i class="conum" data-value="7"></i><b>(7)</b>
timeline1.now = "hello"; <i class="conum" data-value="8"></i><b>(8)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Define an empty Promise</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Define an empty <em>timeline</em></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>promise1.then</code> method <strong>returns another Promise: <code>promise2</code></strong> that will be resolved along with the specified function with the resolved value: <code>a</code> of <code>promise1</code></td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><code>timeline1.sync</code> method <strong>returns another <em>timeline</em>: <code>timeline2</code></strong> that is always synchronized along with the specified function with the updated current value: <code>a</code> of <code>timeline1</code></td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>When <code>promise2</code> is resolved, then show the value</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>When <code>timeline2</code> is updated, always show the value</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>Resolve the value of <code>promise1</code> as <code>"hello"</code></td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td>Update the current value of <code>timeline1</code> as <code>"hello"</code></td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Console</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">hello promise
hello timeline</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>Promise.then</code> and <code>timeline.sync</code> is like <code>Array.map</code> in the manner of delayed or asynchronously. The object method returns the object itself containing the mapped value.</p>
</div>
<div class="sect3">
<h4 id="_self_contained_timeline">4.1. Self Contained <em>timeline</em></h4>
<div class="listingblock">
<div class="title">Promise and timeline-monad</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">import { T } from "timeline-monad";

const promise = new Promise(resolve =&gt; { <i class="conum" data-value="1"></i><b>(1)</b>

  const f = () =&gt; resolve("Hello promise!"); <i class="conum" data-value="2"></i><b>(2)</b>
  setTimeout(f, 1000); <i class="conum" data-value="3"></i><b>(3)</b>

});
const timeline = T(self =&gt; { <i class="conum" data-value="4"></i><b>(4)</b>

  const f = () =&gt; (self.now = "Hello timeline!"); <i class="conum" data-value="5"></i><b>(5)</b>
  setTimeout(f, 1000); <i class="conum" data-value="6"></i><b>(6)</b>

});

const promise1 = promise.then(a =&gt; console.log(a)); <i class="conum" data-value="7"></i><b>(7)</b>
const timeline1 = timeline.sync(a =&gt; console.log(a)); <i class="conum" data-value="8"></i><b>(8)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Define <code>promise</code> and provide the resolving function: <code>resolve</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>resolve</code> the value of <code>promise</code> as <code>"Hello promise!"</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>and that will happen 1 second later</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Define <code>timeline</code> and provide the <em>timeline</em> itself: <code>self</code> to update itself</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Update the current value of <code>self</code> = <code>timeline</code> as <code>"Hello timeline!"</code></td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>and that will happen 1 second later</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>When <code>promise</code> is resolved, then show the value</td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td>When <code>timeline</code> is updated, always show the value</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Console</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">Hello promise!
Hello timeline!</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_continuous_updates">4.2. Continuous updates</h4>
<div class="listingblock">
<div class="title">Promise and timeline-monad</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">import { T } from "timeline-monad";

const timeline2 = T(self =&gt; {

  const f = () =&gt; (self.now = "Hello timeline!");
  setInterval(f, 1000); <i class="conum" data-value="1"></i><b>(1)</b>

});

const timeline3 = timeline2.sync(a =&gt; console.log(a));</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>In this code, the only difference is to use <code>setInterval</code> instead of <code>setTimeout</code></td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Console</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">Hello timeline!
Hello timeline!
Hello timeline!
.....
.....</code></pre>
</div>
</div>
<iframe height="373" style="width: 100%;" scrolling="no" title="Hello Timeline timer" src="//codepen.io/stken2050/embed/daNXja/?height=373&theme-id=36003&default-tab=js,result" frameborder="no" allowtransparency="true" allowfullscreen="true">
  See the Pen <a href='https://codepen.io/stken2050/pen/daNXja/'>Hello Timeline timer</a> by Ken OKABE
  (<a href='https://codepen.io/stken2050'>@stken2050</a>) on <a href='https://codepen.io'>CodePen</a>.
</iframe>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_api">5. API</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="Syntax">5.1. Syntax</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">const timeFunction = (self)  { /**/ self.now = value;};

const timeline = T( timeFunction );

const timeline1 = timeline.sync( someFunction );</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_typescript_type_definition">5.2. TypeScript type definition</h3>
<div class="paragraph">
<p><a href="https://github.com/stken2050/timeline-monad/blob/master/dist/esm/timeline-monad.d.ts">timeline-monad TypeScript type definition</a></p>
</div>
<div class="listingblock">
<div class="title">timeline type definition</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">interface timeline {
    type: string;
    now: any;
    sync: Function;
}
declare const T: (timeFunction?: Function) =&gt; timeline;
export { T };</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_t_timefunction">5.3. T( <em>timeFunction</em> )</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">const T: (timeFunction?: Function) =&gt; timeline</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_timeline_now">5.4. <em>timeline</em>.now</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">const timeFunction = (self)  { /**/ self.now = value;};</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_sync_somefunction">5.5. .sync( <em>someFunction</em> )</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">const timeline1 = timeline
                         .sync( someFunction );</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="title"><strong>timeline-monad</strong> is extremely simple and easy to learn.</div>
<div class="paragraph">
<p><code>T</code>, <code>now</code> and <code>sync</code> are the only reserved words and elements provided by the module.</p>
</div>
<div class="paragraph">
<p><code>T</code> is a function to return a  <em>timeline</em> object.</p>
</div>
<div class="paragraph">
<p><em>timeFunction</em> is a function to define the <em>timeline</em> behavior with the argument <code>self</code> (the <em>timeline</em> itself).</p>
</div>
<div class="paragraph">
<p><em>timeFunction</em> is executed immediately by the <code>T</code> implementation, and when <code>self.now = value</code> is defined, the <em>someFunction</em> defined in the <code>sync</code> method is evaluated.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_simple_usage">6. Simple usage</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_write_and_read_the_current_value_of_timeline">6.1. Write and Read the "current" value of <em>timeline</em></h3>
<div class="paragraph">
<p><code>T()</code> is a <em>timeline</em> instance:</p>
</div>
<div class="listingblock">
<div class="title">timeline instance</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">const timeline = T();</code></pre>
</div>
</div>
<div class="paragraph">
<p>As <em>timeline</em> is an infinite stream of time, <em>timeline</em> has a (in a user&#8217;s perspective) "current" value: <em>timeline</em> <code>.now</code>, and can be easily get/set as below:</p>
</div>
<div class="listingblock">
<div class="title">write and read</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">timeline.now = "Hello";
console.log(timeline.now);</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">console</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">Hello</code></pre>
</div>
</div>
<iframe height="265" style="width: 100%;" scrolling="no" title="Hello Timeline" src="//codepen.io/stken2050/embed/ZwOaEr/?height=265&theme-id=36003&default-tab=js,result" frameborder="no" allowtransparency="true" allowfullscreen="true">
  See the Pen <a href='https://codepen.io/stken2050/pen/ZwOaEr/'>Hello Timeline</a> by Ken OKABE
  (<a href='https://codepen.io/stken2050'>@stken2050</a>) on <a href='https://codepen.io'>CodePen</a>.
</iframe>
</div>
<div class="sect2">
<h3 id="_timeline_now_undefined">6.2. <em>timeline</em>.now = undefined</h3>
<div class="paragraph">
<p>Unless a <em>timeline</em> is defined along with an immidiate "current" value, the current <em>timeline</em> value is undefined.</p>
</div>
<div class="listingblock">
<div class="title">timeline instance</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">const timeline = T();</code></pre>
</div>
</div>
<div class="paragraph">
<p>As long as the value of  <em>timeline</em>.now is <code>undefined</code>, <em>someFunction</em> of <em>timeline</em>.sync(<em>someFunction</em>) is never evaluated.</p>
</div>
<div class="paragraph">
<p>The following code does nothing since the value of  <em>timeline</em>.now is <code>undefined</code>.</p>
</div>
<div class="listingblock">
<div class="title">timeline sync</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">const timeline = T();

timeline.sync(
    a =&gt; console.log(a)
  );</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following code also does nothing.</p>
</div>
<div class="listingblock">
<div class="title">timeline sync</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">const timeline = T();

timeline.sync(
    a =&gt; console.log(a)
  );

timeline.now = undefined;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_timeline_sync_is_declarative">6.3. <em>timeline</em>.sync is declarative</h3>
<div class="paragraph">
<p>On the other hand, the following code does something.</p>
</div>
<iframe height="413" style="width: 100%;" scrolling="no" title="Hello Timeline undefined01" src="//codepen.io/stken2050/embed/BMpKEb/?height=413&theme-id=36003&default-tab=js,result" frameborder="no" allowtransparency="true" allowfullscreen="true">
  See the Pen <a href='https://codepen.io/stken2050/pen/BMpKEb/'>Hello Timeline undefined01</a> by Ken OKABE
  (<a href='https://codepen.io/stken2050'>@stken2050</a>) on <a href='https://codepen.io'>CodePen</a>.
</iframe>
<iframe height="419" style="width: 100%;" scrolling="no" title="Hello Timeline undefined02" src="//codepen.io/stken2050/embed/PVWNrV/?height=419&theme-id=36003&default-tab=js,result" frameborder="no" allowtransparency="true" allowfullscreen="true">
  See the Pen <a href='https://codepen.io/stken2050/pen/PVWNrV/'>Hello Timeline undefined02</a> by Ken OKABE
  (<a href='https://codepen.io/stken2050'>@stken2050</a>) on <a href='https://codepen.io'>CodePen</a>.
</iframe>
<iframe height="409" style="width: 100%;" scrolling="no" title="Hello Timeline undefined03" src="//codepen.io/stken2050/embed/WPRxjQ/?height=409&theme-id=36003&default-tab=js,result" frameborder="no" allowtransparency="true" allowfullscreen="true">
  See the Pen <a href='https://codepen.io/stken2050/pen/WPRxjQ/'>Hello Timeline undefined03</a> by Ken OKABE
  (<a href='https://codepen.io/stken2050'>@stken2050</a>) on <a href='https://codepen.io'>CodePen</a>.
</iframe>
<hr>
</div>
<div class="sect2">
<h3 id="_equation">6.4. Equation</h3>
<div class="stemblock">
<div class="content">
\[timelineB = timelineA \times 2\]
</div>
</div>
<div class="paragraph">
<p><strong><code>timelineB</code> is declared to be <em>always</em> synchronized with <code>timelineA</code>, and the equation is guaranteed to be satisfied.</strong></p>
</div>
<div class="paragraph">
<p><code>timelineB</code> depends (relies) on <code>timelineA</code>, and when <code>timelineA</code> is updated, <code>timelineB</code> is also automatically updated.</p>
</div>
<div class="paragraph">
<p>To describe this relation, the code is below:</p>
</div>
<div class="listingblock">
<div class="title">timeline virtualDOM</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">const timelineA = T();

const timelineB = timelineA
                    .sync(a =&gt; a * 2);

const timeline = timelineB
                   .sync(b =&gt; console.log_(b));

timelineA.now = 1;</code></pre>
</div>
</div>
<iframe height="335" style="width: 100%;" scrolling="no" title="Hello Timeline Sync" src="//codepen.io/stken2050/embed/mvpaER/?height=335&theme-id=36003&default-tab=js,result" frameborder="no" allowtransparency="true" allowfullscreen="true">
  See the Pen <a href='https://codepen.io/stken2050/pen/mvpaER/'>Hello Timeline Sync</a> by Ken OKABE
  (<a href='https://codepen.io/stken2050'>@stken2050</a>) on <a href='https://codepen.io'>CodePen</a>.
</iframe>
<div class="sect3">
<h4 id="_timer_timeline">6.4.1. Timer timeline</h4>
<iframe height="373" style="width: 100%;" scrolling="no" title="Hello Timeline timer" src="//codepen.io/stken2050/embed/daNXja/?height=373&theme-id=36003&default-tab=js,result" frameborder="no" allowtransparency="true" allowfullscreen="true">
  See the Pen <a href='https://codepen.io/stken2050/pen/daNXja/'>Hello Timeline timer</a> by Ken OKABE
  (<a href='https://codepen.io/stken2050'>@stken2050</a>) on <a href='https://codepen.io'>CodePen</a>.
</iframe>
</div>
<div class="sect3">
<h4 id="_canvas">6.4.2. Canvas</h4>
<iframe height="550" style="width: 100%;" scrolling="no" title="unlimitedjs_canvas" src="//codepen.io/stken2050/embed/jdmeYK/?height=550&theme-id=36003&default-tab=js,result" frameborder="no" allowtransparency="true" allowfullscreen="true">
  See the Pen <a href='https://codepen.io/stken2050/pen/jdmeYK/'>unlimitedjs_canvas</a> by Ken OKABE
  (<a href='https://codepen.io/stken2050'>@stken2050</a>) on <a href='https://codepen.io'>CodePen</a>.
</iframe>
<div class="listingblock">
<div class="title">timeline Canvas</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">import { T } from "../../node_modules/timeline-monad/dist/esm/timeline-monad.js";

const canvas = document.getElementById('canvas1'); <i class="conum" data-value="1"></i><b>(1)</b>

const pointerTL = T(self =&gt; {    <i class="conum" data-value="2"></i><b>(2)</b>
  canvas.onmousemove = e =&gt;
    self.now = { x: e.clientX, y: e.clientY };
});

const drawTL = T(self =&gt; {   <i class="conum" data-value="3"></i><b>(3)</b>
  const ctx = canvas.getContext('2d');
  const timeline = self.sync(pointer =&gt; {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.beginPath();
    ctx.arc(pointer.x - 10, pointer.y - 10, 10, 0, Math.PI * 2, true);
    ctx.fillStyle = "red";
    ctx.fill();
  });
});

const timeline = pointerTL.sync(pointer =&gt;    <i class="conum" data-value="4"></i><b>(4)</b>
  drawTL.now = pointer
);</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>canvas DOM node</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>INPUT: <em>timeline</em> of mouse pointer coordinate</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>OUTPUT: <em>timeline</em> of canvas drawing</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>INPUT(pointerTL) is synchronized with OUTPUT(drawTL)</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_virtual_dom_superfine">6.4.3. Virtual DOM (Superfine)</h4>
<iframe height="654" style="width: 100%;" scrolling="no" title="unlimitedjs_vdom" src="//codepen.io/stken2050/embed/xMdyjx/?height=654&theme-id=36003&default-tab=js,result" frameborder="no" allowtransparency="true" allowfullscreen="true">
  See the Pen <a href='https://codepen.io/stken2050/pen/xMdyjx/'>unlimitedjs_vdom</a> by Ken OKABE
  (<a href='https://codepen.io/stken2050'>@stken2050</a>) on <a href='https://codepen.io'>CodePen</a>.
</iframe>
<div class="listingblock">
<div class="title">timeline virtualDOM</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">import { T } from "../../node_modules/timeline-monad/dist/esm/timeline-monad.js";
import { h, patch } from "../../node_modules/superfine/src/index.js";

const canvas = document.getElementById('vdom1'); <i class="conum" data-value="1"></i><b>(1)</b>

const pointerTL = T(self =&gt; {    <i class="conum" data-value="2"></i><b>(2)</b>
  canvas.onmousemove = e =&gt;
    self.now = { x: e.clientX, y: e.clientY };
});

const drawTL = T(self =&gt; {    <i class="conum" data-value="3"></i><b>(3)</b>
  const topNodeTL = self.sync(pointer =&gt;
    &lt;div style={{
      "left": (pointer.x - 20) + "px",
      "top": (pointer.y - 20) + "px",
      "width": "20px",
      "height": "20px",
      "border-radius": "50%",
      "background-color": "red",
      "position": "relative"
    }}&gt;&lt;/div&gt;
  );
  const viewNodeTL = topNodeTL.sync(topNode =&gt;
    patch(viewNodeTL.now, topNode, canvas)
  );
});

const timeline = pointerTL.sync(pointer =&gt;   <i class="conum" data-value="4"></i><b>(4)</b>
  drawTL.now = pointer
);</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>real DOM node (named as <code>canvas</code>)</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>INPUT: <em>timeline</em> of mouse pointer coordinate : <em>same code of <strong>timeline Canvas</strong></em></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>OUTPUT: <em>timeline</em> of virtualDOM drawing(rendering)</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>INPUT(pointerTL) is synchronized with OUTPUT(drawTL)  : <em>same code of <strong>timeline Canvas</strong></em></td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_for_virtualdomweb_ui_read_more_on_unlimitedjs_docs_tutorial">6.5. For VirtualDOM(Web UI), read more on <a href="https://stken2050.github.io/unlimitedjs/">unlimitedjs Docs &amp; Tutorial</a></h3>

</div>
</div>
</div>
<div class="sect1">
<h2 id="_mit_license">7. MIT License</h2>
<div class="sectionbody">
<iframe src="https://ghbtns.com/github-btn.html?user=stken2050&repo=timeline-monad&type=star&count=true&size=large" frameborder="0" scrolling="0" width="160px" height="30px"></iframe>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2019-02-08 18:00:41 JST
</div>
</div>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/solarized-dark.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
<script>hljs.initHighlighting()</script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [["\\(", "\\)"]],
    displayMath: [["\\[", "\\]"]],
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },
  TeX: { equationNumbers: { autoNumber: "none" } }
});
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
</body>
</html>